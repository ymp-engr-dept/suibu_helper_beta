<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spectrum Analyzer Module</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <div id="spectrum-analyzer-app">
    <div class="analyzer-header">
      <h2>Professional Spectrum Analyzer</h2>
      <span class="status-indicator" id="statusIndicator">Ready</span>
    </div>

    <div class="controls-wrapper">
      
      <div class="control-section">
        <h3>Input & Analysis</h3>
        <div class="control-grid">
          <label class="control-item">
            <span class="label-text">æ„Ÿåº¦ (Gain)</span>
            <input id="gainInput" type="number" value="1.0" min="0.1" max="10" step="0.1">
          </label>
          <label class="control-item">
            <span class="label-text">åŸºæº–ãƒ”ãƒƒãƒ (A4)</span>
            <input id="a4Input" type="number" value="442" min="400" max="480" step="1">
          </label>
          <label class="control-item checkbox-item">
            <input type="checkbox" id="showHarmonicsCheckbox" checked>
            <span>å€éŸ³ãƒ»éŸ³åè¡¨ç¤º</span>
          </label>
        </div>
      </div>

      <div class="control-section">
        <h3>Tools</h3>
        <div class="control-flex">
          <button id="freezeBtn" class="btn">ãƒ•ãƒªãƒ¼ã‚º</button>
          <div class="separator"></div>
          <button id="saveCompareBtn" class="btn" title="ç¾åœ¨ã®æ³¢å½¢ã‚’ä¿å­˜">æ¯”è¼ƒæ³¢å½¢ã‚’ä¿å­˜</button>
          <label class="checkbox-item">
            <input type="checkbox" id="showCompareCheckbox">
            <span>æ¯”è¼ƒè¡¨ç¤º</span>
          </label>
        </div>
      </div>

      <div class="control-section">
        <h3>Source</h3>
        <div class="control-flex">
          <button id="recordBtn" class="btn record-btn">â— éŒ²éŸ³</button>
          <label class="btn file-btn">
            ãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼
            <input type="file" id="fileInput" accept="audio/*" hidden />
          </label>
        </div>
      </div>
    </div>

    <div class="player-interface disabled" id="playerInterface">
      <div class="player-top-row">
        <label class="mode-switch">
          <input type="checkbox" id="sourceModeCheckbox">
          <span class="slider"></span>
          <span class="mode-label">éŸ³æºãƒ¢ãƒ¼ãƒ‰ (File Mode)</span>
        </label>
        
        <div class="transport-controls">
          <button id="playPauseBtn" class="icon-btn" disabled>â–¶</button>
        </div>

        <div class="volume-control">
          <span>ğŸ”Š</span>
          <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1" disabled>
        </div>
      </div>

      <div class="player-seek-row">
        <span id="currentTimeDisplay" class="time-display">0:00</span>
        <input type="range" id="audioSeekBar" value="0" step="0.01" min="0" max="100" disabled>
        <span id="durationDisplay" class="time-display">0:00</span>
      </div>
      
      <div class="player-bottom-row">
        <select id="playbackRateSelect" disabled>
          <option value="0.25">x0.25 (Slow)</option>
          <option value="0.5">x0.50</option>
          <option value="1.0" selected>x1.00 (Normal)</option>
          <option value="1.5">x1.50</option>
          <option value="2.0">x2.00</option>
        </select>
      </div>
    </div>

    <div class="canvas-container">
      <canvas id="analyzerCanvas"></canvas>
    </div>

    <audio id="audioEngine" style="display: none;"></audio>
  </div>

  <script src="script.js"></script>
  <script>
    // SPAã§ã®ãƒã‚¦ãƒ³ãƒˆã‚’æƒ³å®šã—ãŸèµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
    document.addEventListener('DOMContentLoaded', () => {
      // ã‚¯ãƒ©ã‚¹ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã—ã¦èµ·å‹•
      const analyzer = new SpectrumAnalyzer('spectrum-analyzer-app');
      analyzer.mount();
    });
  </script>
</body>
</html>